{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Teo",
	"scopeName": "source.teo",
	"fileTypes": ["teo"],
	"patterns": [
    {
      "include": "#linedDecoratorDeclaration"
    },
    {
      "include": "#blockedDecoratorDeclaration"
    },
    {
      "include": "#pipelineDeclaration"
    },

    {
      "include": "#declareKeyword"
    },
		{
			"include": "#strings"
		},
    {
      "include": "#regexs"
    },
    {
      "include": "#pipeline"
    }
	],
	"repository": {
    "linedDecoratorDeclaration": {
      "name": "linedDecoratorDeclaration",
      "begin": "(declare)\\s*(unique|exclusive)?\\s*(model|interface|enum)?\\s*(field|member|property|relation)?\\s*(decorator)\\s+(\\w+)",
      "beginCaptures": {
        "1": { "name": "storage.modifier.declare.teo" },
        "2": { "name": "storage.modifier.declare.teo" },
        "3": { "name": "storage.modifier.declare.teo" },
        "4": { "name": "storage.modifier.declare.teo" },
        "5": { "name": "storage.modifier.declare.teo" },
        "6": { "name": "entity.name.function.teo" }
      },
      "patterns": [
        {
          "include": "#typeParameters"
        },
        {
          "include": "#argumentListDeclaration"
        }
      ],
      "end": "(?<=\\\n)"
    },
    "blockedDecoratorDeclaration": {
      "name": "blockedDecoratorDeclaration",
      "begin": "(declare)\\s*(unique|exclusive)?\\s*(model|interface|enum)?\\s*(field|member|property|relation)?\\s*(decorator)\\s+(\\w+)",
      "beginCaptures": {
        "1": { "name": "storage.modifier.declare.teo" },
        "2": { "name": "storage.modifier.declare.teo" },
        "3": { "name": "storage.modifier.declare.teo" },
        "4": { "name": "storage.modifier.declare.teo" },
        "5": { "name": "storage.modifier.declare.teo" },
        "6": { "name": "entity.name.function.teo" }
      },
      "patterns": [
        {
          "include": "#decoratorVariantBlock"
        }
      ],
      "end": "(?<=\\\n)"
    },
    "pipelineDeclaration": {
      "begin": "(declare)\\s+(pipeline)\\s+(item)\\s+(\\w+)",
      "beginCaptures": {
        "1": { "name": "storage.modifier.declare.teo" },
        "2": { "name": "storage.modifier.declare.teo" },
        "3": { "name": "storage.modifier.declare.teo" },
        "4": { "name": "entity.name.function.teo" }
      },
      "patterns": [
        {
          "include": "#typeParameters"
        },
        {
          "include": "#pipelineItemVariantBlock"
        }
      ],
      "end": "(?<=\\\n)"
    },
    "decoratorVariantBlock": {
      "begin": "(\\{)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.teo" }
      },
      "patterns": [
        {
          "include": "#tripleSlashComment"
        },
        {
          "include": "#doubleSlashComment"
        },
        {
          "include": "#decoratorVariantDeclaration"
        }
      ],
      "end": "(\\})",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.teo" }
      }
    },
    "pipelineItemVariantBlock": {
      "begin": "(\\{)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.teo" }
      },
      "patterns": [
        {
          "include": "#tripleSlashComment"
        },
        {
          "include": "#doubleSlashComment"
        },
        {
          "include": "#pipeineItemVariantDeclaration"
        }
      ],
      "end": "(\\})",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.teo" }
      }
    },
    "pipeineItemVariantDeclaration": {
      "begin": "(variant)",
      "beginCaptures": {
        "1": {
          "name": "storage.modifier.declare.teo"
        }
      },
      "patterns": [
        {
          "include": "#typeParameters"
        },
        {
          "include": "#argumentListDeclaration"
        },
        {
          "include": "#colon"
        },
        {
          "include": "#typeExpression"
        },
        {
          "include": "arrow"
        }
      ],
      "end": "\n"
    },
    "decoratorVariantDeclaration": {
      "begin": "(variant)",
      "beginCaptures": {
        "1": {
          "name": "storage.modifier.declare.teo"
        }
      },
      "patterns": [
        {
          "include": "#typeParameters"
        },
        {
          "include": "#argumentListDeclaration"
        },
        {
          "include": "#colon"
        },
        {
          "include": "#typeExpression"
        },
        {
          "include": "arrow"
        }
      ],
      "end": "\n"
    },
    "declareKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(declare)",
          "captures": {
            "1": {
              "name": "storage.modifier.keyword.teo"
            }
          }
        }
      ]
    },
    "actionKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(action)",
          "captures": {
            "1": {
              "name": "storage.modifier.keyword.teo"
            }
          }
        }
      ]
    },
    "middlewareKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(middleware)",
          "captures": {
            "1": {
              "name": "storage.modifier.keyword.teo"
            }
          }
        }
      ]
    },
    "usingKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(using)",
          "captures": {
            "1": {
              "name": "storage.modifier.keyword.teo"
            }
          }
        }
      ]
    },
    "formKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(form)",
          "captures": {
            "1": {
              "name": "storage.modifier.keyword.teo"
            }
          }
        }
      ]
    },
    "jsonKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(json)",
          "captures": {
            "1": {
              "name": "storage.modifier.keyword.teo"
            }
          }
        }
      ]
    },
    "enumKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(enum)",
          "captures": {
            "1": {
              "name": "storage.modifier.keyword.teo"
            }
          }
        }
      ]
    },
    "importKeyword": {
      "name": "storage.modifier.config.teo",
      "patterns": [
        {
          "match": "(import)",
          "captures": {
            "1": {
              "name": "storage.type.config.teo"
            }
          }
        }
      ]
    },
    "configKeyword": {
      "name": "storage.modifier.config.teo",
      "patterns": [
        {
          "match": "(connector|client|entity|server|autoseed dataset|autoseed|dataset|group|record)",
          "captures": {
            "1": {
              "name": "storage.type.config.teo"
            }
          }
        }
      ]
    },
    "modelKeyword": {
      "name": "storage.modifier.keyword.teo",
      "patterns": [
        {
          "match": "(model)",
          "captures": {
            "1": {
              "name": "storage.type.model.teo"
            }
          }
        }
      ]
    },
    "namespaceBlock": {
      "begin": "^\\s*(namespace)\\s+([A-Za-z][\\w]*)\\s+({)",
      "name": "source.teo.embedded.namespace",
      "beginCaptures": {
        "1": {
          "name": "storage.type.config.teo"
        },
        "2": {
          "name": "entity.name.type.config.teo"
        },
        "3": {
          "name": "punctuation.definition.tag.teo"
        }
      },
      "patterns": [
        {
          "include": "#tripleSlashComment"
        },
        {
          "include": "#doubleSlashComment"
        },
        {
          "include": "#identifierImport"
        },
        {
          "include": "#fileImport"
        },
        {
          "include": "#importKeyword"
        },
        {
          "include": "#constantDeclaration"
        },
        {
          "include": "#configBlock"
        },
        {
          "include": "#namedConfigBlock"
        },
        {
          "include": "#datasetBlock"
        },
        {
          "include": "#namespaceBlock"
        },
        {
          "include": "#configKeyword"
        },
        {
          "include": "#modelBlock"
        },
        {
          "include": "#modelKeyword"
        },
        {
          "include": "#enumBlock"
        },
        {
          "include": "#enumKeyword"
        },
        {
          "include": "#interfaceDeclaration"
        },    
        {
          "include": "#structDeclaration"
        },
        {
          "include": "#configDeclaration"
        },
        {
          "include": "#linedDecoratorDeclaration"
        },
        {
          "include": "#blockedDecoratorDeclaration"
        },
        {
          "include": "#pipelineDeclaration"
        },
        {
          "include": "#middlewareDeclaration"
        },
        {
          "include": "#actionGroupDeclaration"
        },
        {
          "include": "#actionDeclaration"
        },
        {
          "include": "#declareKeyword"
        },
        {
          "include": "#strings"
        },
        {
          "include": "#regexs"
        },
        {
          "include": "#attributeWithArguments"
        },
        {
          "include": "#attribute"
        },
        {
          "include": "#pipeline"
        }
      ],
      "end": "\\s*\\}",
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.tag.teo"
        }
      }
    }
	}
}
